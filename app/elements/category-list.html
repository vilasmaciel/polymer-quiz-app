<dom-module id="category-list">
  <style>
  .tile {
    min-width: 250px;
    max-width: 350px;
    height: 300px;
    margin: 15px;
    cursor: pointer;
    color: white;
    background-color: #F44336;
  }

  .tile .tile-footer {
    height: 30px;
    border-top: 1px solid #ccc;
    padding: 10px;
  }

  .tile .icon iron-icon {
    --iron-icon-height: 62px;
    --iron-icon-width: 62px;
  }
  </style>

  <template>
    <div class="container layout horizontal wrap">

      <template is="dom-repeat" items="[[items]]">

        <paper-material elevation="1" class="tile flex layout vertical">
          <div on-click="categorySelected" id="[[item.activityId]]" class="layout fit" style="z-index: 2"> </div>
          <div class="icon layout horizontal center-justified  center flex">
            <iron-icon icon="home"></iron-icon>
          </div>
          <div class="tile-footer layout horizontal center">
            <div class="paper-font-body1 layout flex center center-justified">{{item.name}}</div>
            <iron-icon icon="av:play-arrow"></iron-icon>
          </div>
        </paper-material elevation>

      </template>


    </div>
  </template>

  <script>
  (function() {
    Polymer({

      is: 'category-list',

      behaviors: [
        Polymer.NeonSharedElementAnimatableBehavior,
        Polymer.NeonAnimationRunnerBehavior
      ],

      properties: {
        items: {
          type: Array,
          notify: true,
          observer: '_itemsChanged'
        },

        category: {
          type: String,
          observer: '_categoryChanged'
        },

        animationConfig: {
          type: Object,
          value: function() {
            return {
              'entry': {
                name: 'cascaded-animation',
                animation: 'transform-animation',
                transformFrom: 'translateY(100%)',
                transformTo: 'none',
                timing: {
                  delay: 50
                }
              },
              'exit': {
                name: 'scale-down-animation',
                node: this
              }
            }
          }
        }

      },

      attached: function() {
        this.async(function() {
          var nodeList = Polymer.dom(this.root).querySelectorAll('.tile');
          this.animationConfig['entry'].nodes = Array.prototype.slice.call(nodeList);
        });
      },

      show: function() {
        this.style.opacity = 1;
        if (this.animationConfig['entry'].nodes) this.playAnimation('entry');
      },

      _itemsChanged: function(e) {
        this.async(function() {
          var nodeList = Polymer.dom(this.root).querySelectorAll('.tile');
          if (nodeList) this.animationConfig['entry'].nodes = Array.prototype.slice.call(nodeList);
        });

        var _this = this;

        setTimeout(function() {
          _this.show();

        }, 100);
      },

      _categoryChanged: function() {
        console.log(this.category);
      },

      categorySelected: function(e) {
        this.fire('category-selected', e.target.id);
      }

    });

  })();
  </script>

</dom-module>
